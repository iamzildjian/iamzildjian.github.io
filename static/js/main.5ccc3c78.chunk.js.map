{"version":3,"sources":["components/Footer.js","components/Gallery/utils/round.js","components/Gallery/utils/background.js","components/Gallery/index.js","components/Gallery/layouts/columns.js","components/Lightbox.js","utils.js","App.js","photos.js","index.js"],"names":["Footer","href","target","round","value","decimals","Number","Math","colors","map","color","getRandomColor","floor","random","length","Gallery","photos","onClick","margin","onLoad","useState","containerWidth","setContainerWidth","galleryEl","useRef","useLayoutEffect","animationFrameID","observer","ResizeObserver","entries","newWidth","contentRect","width","window","requestAnimationFrame","observe","current","disconnect","cancelAnimationFrame","useMemo","columns","computeDynamicColumns","computedPhotos","colWidth","photosWithSizes","photo","newHeight","height","colLeftPositions","colCurrTopPositions","i","photosPositioned","smallestCol","reduce","acc","item","top","left","tallestCol","containerHeight","computeColumnLayout","galleryStyle","position","handleClick","useCallback","event","index","previous","next","refs","Array","from","React","createRef","useEffect","bgColors","id","ref","style","src","title","alt","bgColor","background","className","defaultProps","memo","Lightbox","viewerIsOpen","currentPhoto","closeLightbox","onClose","currentIndex","showNavigationOnTouchDevice","views","size","caption","isElementInViewport","el","rect","getBoundingClientRect","windowHeight","innerHeight","document","documentElement","clientHeight","windowWidth","innerWidth","clientWidth","vertInView","horInView","lazyLoad","images","every","image","hadLoadSymbol","lazyLoadEvent","fn","wait","inThrottle","lastFn","lastTime","context","this","args","arguments","apply","Date","now","clearTimeout","setTimeout","max","throttle","processImages","addEventListener","loadImage","img","Image","dataset","original","onload","classList","add","onerror","removeEventListener","filteredPhotos","canvas","createElement","getContext","toDataURL","indexOf","canUseWebP","rest","replace","App","setCurrentPhoto","setViewerIsOpen","openLightbox","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5ccc3c78.chunk.js","sourcesContent":["import React from 'react'\n\nfunction Footer() {\n  return (<footer><span>© </span> 2022 <a href=\"https://tomotoes.com/\" target=\"blank\">TOMOTOES.COM</a></footer>)\n}\n\nexport default Footer\n","export const round = (value, decimals) => {\n  if (!decimals) decimals = 0\n  return Number(`${Math.round(`${value}e${decimals}`)}e-${decimals}`)\n}\n","const prefix = 'data:image/png;base64,'\n\nconst white =\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII='\nconst green =\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOM3dv8HwAFugKeFHNe2gAAAABJRU5ErkJggg=='\nconst green2 =\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOsLSv4DwAFPwJkf7xuOwAAAABJRU5ErkJggg=='\nconst yellow =\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/7/wPwAI5ANwEHGVPQAAAABJRU5ErkJggg=='\nconst yellow2 =\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mO8cXX9fwAIRgNdOpasaAAAAABJRU5ErkJggg=='\nconst orange =\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mN80S37HwAGhAKRsld48QAAAABJRU5ErkJggg=='\nconst red =\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mN8rhn2HwAFzAJnxf9sDQAAAABJRU5ErkJggg=='\nconst blue =\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mMMbnrxHwAFqwK+oiXE3gAAAABJRU5ErkJggg=='\nconst blue2 =\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mM03nvtPwAFuALHzaThLAAAAABJRU5ErkJggg=='\nconst blue3 =\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkyuj5DwADYQH3Gb9KdwAAAABJRU5ErkJggg=='\nconst purple =\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOcmvfiPwAGdwLsInOerQAAAABJRU5ErkJggg=='\nconst deepPurple =\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNMter+DwAEYQIr1DLJIQAAAABJRU5ErkJggg=='\nconst morePurple =\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOcI9v1HwAE5AJEQOnd/AAAAABJRU5ErkJggg=='\nconst pink =\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP81nPmPwAIHQNPG1c/KwAAAABJRU5ErkJggg=='\nconst pink2 =\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mM85tf3HwAGJwKj3F8CBQAAAABJRU5ErkJggg=='\nconst gray =\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOsLSv4DwAFPwJkf7xuOwAAAABJRU5ErkJggg=='\nconst red2 =\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNstk38DwAEjgIiTpcmsQAAAABJRU5ErkJggg=='\nconst green3 =\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mM8fP/ufwAIbAOAdKkwIAAAAABJRU5ErkJggg=='\nconst orange2 =\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mM85tf3HwAGJwKj3F8CBQAAAABJRU5ErkJggg=='\nconst brown =\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOsyAz6DwAEyAI0CG2DPQAAAABJRU5ErkJggg=='\n\nconst colors = [\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mO0Scz4DwAD7AIGykeHNgAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNsfP3lPwAHtgNhjbed3QAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mO08+/9DwAECAIbYvarOwAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mPUSjf9DwADUAHH2R4+qQAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mPsmL/9PwAGdALfLLTZgwAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mMM2FD3HwAFVQJ/wQSakQAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOcUtf+HwAF4QKaLYURggAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mO007D9DwAC8wGkgAj2wQAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mPk7Z/6HwAEFAIygk/bbQAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mM85i3/HwAFQAIxwDfEwwAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mMU9Hj3HwAEAQJI0J8X3wAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNUk+f6DwACEgFQ4cywdAAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOcd/rmfwAHlANDxXJFGwAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNsSun9DwAFVwJ0Dslp5gAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNMMSz/DwAEGgINf5zfKgAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNcVZn/HwAF+gKTwpRdtAAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNcVZn/HwAF+gKTwpRdtAAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mN0z4z6DwAEFAILQQRF+gAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNMnnr4PwAF2gK8g2AjSgAAAABJRU5ErkJggg==',\n  'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/WT+fwAI3wN/ghaxIAAAAABJRU5ErkJggg==',\n  brown,\n  white,\n  green,\n  green2,\n  red2,\n  yellow,\n  blue3,\n  yellow2,\n  orange,\n  orange2,\n  red,\n  green3,\n  pink2,\n  blue,\n  purple,\n  morePurple,\n  blue2,\n  gray,\n  deepPurple,\n  pink,\n].map(color => prefix + color)\n\nconst getRandomColor = () => colors[Math.floor(Math.random() * colors.length)]\n\nexport default getRandomColor\n","import PropTypes from 'prop-types'\nimport React, {\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState\n} from 'react'\nimport ResizeObserver from 'resize-observer-polyfill'\nimport { computeColumnLayout, computeDynamicColumns } from './layouts/columns'\nimport getRandomColor from './utils/background'\n\nfunction Gallery({ photos, onClick, margin, onLoad }) {\n  const [containerWidth, setContainerWidth] = useState(0)\n  const galleryEl = useRef(null)\n\n  useLayoutEffect(() => {\n    let animationFrameID = null\n    const observer = new ResizeObserver(entries => {\n      const newWidth = entries[0].contentRect.width\n      if (containerWidth !== newWidth) {\n        animationFrameID = window.requestAnimationFrame(() => {\n          setContainerWidth(Math.floor(newWidth))\n        })\n      }\n    })\n    observer.observe(galleryEl.current)\n    return () => {\n      observer.disconnect()\n      window.cancelAnimationFrame(animationFrameID)\n    }\n  })\n\n  const [computedPhotos, galleryStyle] = useMemo(() => {\n    const columns = computeDynamicColumns(containerWidth)\n    const computedPhotos = computeColumnLayout({\n      containerWidth: containerWidth - 1,\n      columns,\n      margin,\n      photos,\n    })\n    const galleryStyle = { position: 'relative' }\n    if (computedPhotos.length > 0) {\n      galleryStyle.height =\n        computedPhotos[computedPhotos.length - 1].containerHeight\n    }\n    return [computedPhotos, galleryStyle]\n  }, [containerWidth, margin, photos])\n\n  const handleClick = useCallback(\n    (event, { index }) => {\n      onClick(event, {\n        index,\n        photo: photos[index],\n        previous: photos[index - 1] || null,\n        next: photos[index + 1] || null,\n      })\n    },\n    [onClick, photos]\n  )\n\n  const refs = useMemo(\n    () => Array.from({ length: photos.length }, () => React.createRef()),\n    [photos.length]\n  )\n\n  useEffect(() => {\n    onLoad(refs.map(({ current }) => current))\n  }, [onLoad, refs])\n\n  const bgColors = useMemo(\n    () => Array.from({ length: photos.length }, getRandomColor),\n    [photos.length]\n  )\n\n  return (\n    <div id=\"react-gallery\" ref={galleryEl} style={galleryStyle}>\n      {computedPhotos.map((photo, index) => {\n        const { src, top, left, width, height, title, alt } = photo\n        const bgColor = bgColors[index]\n        const style = {\n          position: 'absolute',\n          top,\n          left,\n          width,\n          height,\n          margin,\n          background: `url(${bgColor})`,\n        }\n        const onClick = event => {\n          handleClick(event, { photo, index })\n        }\n        return (\n          <div\n            key={src}\n            className=\"react-photo\"\n            style={style}\n            onClick={onClick}>\n            <img\n              ref={refs[index]}\n              src={bgColor}\n              data-original={src}\n              width={width}\n              height={height}\n              alt={alt}\n              title={title}\n            />\n            <span>{title}</span>\n          </div>\n        )\n      })}\n    </div>\n  )\n}\n\nGallery.propTypes = {\n  photos: PropTypes.array,\n  margin: PropTypes.number,\n  onClick: PropTypes.func,\n  onLoad: PropTypes.func,\n}\n\nGallery.defaultProps = {\n  margin: 8,\n}\n\nexport default React.memo(Gallery)\n","import { round } from '../utils/round'\n\n// compute sizes for column directed layouts\nexport const computeColumnLayout = ({\n  photos,\n  columns,\n  containerWidth,\n  margin,\n}) => {\n  // calculate each colWidth based on total width and column amount\n  let colWidth = (containerWidth - margin * 2 * columns) / columns\n\n  // map through each photo to assign adjusted height and width based on colWidth\n  const photosWithSizes = photos.map(photo => {\n    const newHeight = (photo.height / photo.width) * colWidth\n    return {\n      ...photo,\n      width: round(colWidth, 1),\n      height: round(newHeight, 1),\n    }\n  })\n\n  // store all possible left positions\n  // and current top positions for each column\n  const colLeftPositions = []\n  const colCurrTopPositions = []\n  for (let i = 0; i < columns; i++) {\n    colLeftPositions[i] = round(i * (colWidth + margin * 2), 1)\n    colCurrTopPositions[i] = 0\n  }\n\n  // map through each photo, then reduce thru each \"column\"\n  // find column with the smallest height and assign to photo's 'top'\n  // update that column's height with this photo's height\n  const photosPositioned = photosWithSizes.map(photo => {\n    const smallestCol = colCurrTopPositions.reduce((acc, item, i) => {\n      acc = item < colCurrTopPositions[acc] ? i : acc\n      return acc\n    }, 0)\n\n    photo.top = colCurrTopPositions[smallestCol]\n    photo.left = colLeftPositions[smallestCol]\n    colCurrTopPositions[smallestCol] =\n      colCurrTopPositions[smallestCol] + photo.height + margin * 2\n\n    // store the tallest col to use for gallery height because of abs positioned elements\n    const tallestCol = colCurrTopPositions.reduce((acc, item, i) => {\n      acc = item > colCurrTopPositions[acc] ? i : acc\n      return acc\n    }, 0)\n    photo.containerHeight = colCurrTopPositions[tallestCol]\n    return photo\n  })\n  return photosPositioned\n}\n\nexport const computeDynamicColumns = containerWidth => {\n  let columns = 1\n  if (containerWidth >= 500) columns = 2\n  if (containerWidth >= 900) columns = 3\n  if (containerWidth >= 1500) columns = 4\n  if (containerWidth >= 2200) columns = 5\n  if (containerWidth >= 3000) columns = 6\n  if (containerWidth >= 3800) columns = 7\n  if (containerWidth >= 4500) columns = 8\n  if (containerWidth >= 5300) columns = 9\n  return columns\n}\n","import PropTypes from 'prop-types'\nimport React from 'react'\n\nimport Carousel, { Modal, ModalGateway } from 'react-images'\n\nfunction Lightbox({ viewerIsOpen, photos, currentPhoto, closeLightbox }) {\n  return (\n    <ModalGateway>\n      {viewerIsOpen ? (\n        <Modal onClose={closeLightbox}>\n          <Carousel\n            currentIndex={currentPhoto}\n            showNavigationOnTouchDevice\n            views={photos.map(({ src, title, size: { height, width } }) => ({\n              src,\n              caption: title,\n              width,\n              height,\n            }))}\n          />\n        </Modal>\n      ) : null}\n    </ModalGateway>\n  )\n}\n\nLightbox.propTypes = {\n  viewerIsOpen: PropTypes.bool,\n  photos: PropTypes.array,\n  currentPhoto: PropTypes.number,\n  closeLightbox: PropTypes.func,\n}\n\nexport default React.memo(Lightbox)\n","const throttle = (fn, wait) => {\n  let inThrottle, lastFn, lastTime\n  return function () {\n    const context = this\n    const args = arguments\n    if (!inThrottle) {\n      inThrottle = true\n      fn.apply(context, args)\n      lastTime = Date.now()\n      return\n    }\n\n    clearTimeout(lastFn)\n    lastFn = setTimeout(function () {\n      if (Date.now() - lastTime >= wait) {\n        fn.apply(context, args)\n        lastTime = Date.now()\n      }\n    }, Math.max(wait - (Date.now() - lastTime), 0))\n  }\n}\n\n// http://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible-in-the-current-viewport\nfunction isElementInViewport(el) {\n  const rect = el.getBoundingClientRect()\n  const windowHeight = (window.innerHeight || document.documentElement.clientHeight)\n  const windowWidth = (window.innerWidth || document.documentElement.clientWidth)\n\n  const vertInView = (rect.top <= windowHeight) && ((rect.top + rect.height) >= 0)\n  const horInView = (rect.left <= windowWidth) && ((rect.left + rect.width) >= 0)\n\n  const isElementPartiallyInViewport = vertInView && horInView\n  if (isElementPartiallyInViewport) { return true }\n\n  return (\n    (rect.left >= 0) &&\n    (rect.top >= 0) &&\n    ((rect.left + rect.width) <= windowWidth) &&\n    ((rect.top + rect.height) <= windowHeight)\n  )\n}\n\nfunction lazyLoad(images) {\n  if (!images || !images.length || images.every(image => !image)) { return }\n\n  const hadLoadSymbol = Array.from({ length: images.length })\n\n  function loadImage(el, index) {\n    const img = new Image()\n    const src = el.dataset.original\n\n    img.src = src\n    img.onload = function () {\n      el.classList.add('loaded')\n      el.src = src\n      hadLoadSymbol[index] = true\n    }\n    img.onerror = function () {\n      hadLoadSymbol[index] = true\n    }\n  }\n  const lazyLoadEvent = throttle(processImages, 120)\n  window.addEventListener('scroll', lazyLoadEvent, false)\n\n  function processImages() {\n    if (hadLoadSymbol.every(el => !!el)) {\n      window.removeEventListener('scroll', lazyLoadEvent)\n      return\n    }\n    for (let i = 0; i < images.length; ++i) {\n      if (!hadLoadSymbol[i] && isElementInViewport(images[i])) {\n        loadImage(images[i], i)\n      }\n    }\n  }\n  setTimeout(processImages, 0)\n}\n\nconst canUseWebP = () => {\n  const canvas = document.createElement('canvas')\n  if (canvas.getContext && canvas.getContext('2d')) {\n    // eslint-disable-next-line eqeqeq\n    return canvas.toDataURL('image/webp').indexOf('data:image/webp') == 0\n  }\n  return false\n}\n\nconst filterPhotos = photos =>\n  canUseWebP()\n    ? photos.map(({ src, ...rest }) => ({ ...rest, src: src.replace(/((.jpg)|(.jpeg)|(.png))$/, '.webp') }))\n    : photos\n\nexport { lazyLoad, filterPhotos }\n","import React, { useCallback, useState } from 'react'\nimport Footer from './components/Footer'\nimport Gallery from './components/Gallery'\nimport Lightbox from './components/Lightbox'\nimport photos from './photos'\n\nimport { filterPhotos, lazyLoad } from './utils.js'\n\nconst filteredPhotos = filterPhotos(photos)\n\nfunction App() {\n  const [currentPhoto, setCurrentPhoto] = useState(0)\n  const [viewerIsOpen, setViewerIsOpen] = useState(false)\n\n  const openLightbox = useCallback((event, { photo, index }) => {\n    setCurrentPhoto(index)\n    setViewerIsOpen(true)\n  }, [])\n\n  const closeLightbox = useCallback(() => {\n    setCurrentPhoto(0)\n    setViewerIsOpen(false)\n  }, [])\n\n  return (\n    <>\n      <Gallery\n        photos={filteredPhotos}\n        onLoad={lazyLoad}\n        onClick={openLightbox}\n      />\n      <Lightbox\n        photos={filteredPhotos}\n        viewerIsOpen={viewerIsOpen}\n        currentPhoto={currentPhoto}\n        closeLightbox={closeLightbox}\n      />\n      <Footer />\n    </>\n  )\n}\n\nexport default App\n","export default [\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/小鸟开会.jpeg', title: '小鸟开会', alt: '小鸟开会', width: 39, height: 29, size: { height: 3472, width: 4624 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/👶🏻🕊.jpeg', title: '👶🏻🕊', alt: '👶🏻🕊', width: 39, height: 29, size: { height: 3472, width: 4624 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/🪶.jpeg', title: '🪶', alt: '🪶', width: 39, height: 29, size: { height: 3472, width: 4624 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/💚.jpeg', title: '💚', alt: '💚', width: 29, height: 39, size: { height: 4624, width: 3472 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/🤡.jpeg', title: '🤡', alt: '🤡', width: 14, height: 11, size: { height: 1278, width: 1706 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/Git branch.jpeg', title: 'Git branch', alt: 'Git branch', width: 14, height: 11, size: { height: 1279, width: 1706 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/老树昏鸦.jpeg', title: '老树昏鸦', alt: '老树昏鸦', width: 14, height: 11, size: { height: 1279, width: 1706 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/🀄️.jpeg', title: '🀄️', alt: '🀄️', width: 14, height: 11, size: { height: 1278, width: 1706 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/😾.jpeg', title: '😾', alt: '😾', width: 14, height: 11, size: { height: 1278, width: 1706 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/1px引发的血案.jpeg', title: '1px引发的血案', alt: '1px引发的血案', width: 14, height: 11, size: { height: 1278, width: 1706 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/🚇🌧🏠.jpeg', title: '🚇🌧🏠', alt: '🚇🌧🏠', width: 34, height: 23, size: { height: 2771, width: 4032 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/87の🕊.jpeg', title: '87の🕊', alt: '87の🕊', width: 16, height: 8, size: { height: 972, width: 1920 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/托尔大大.png', title: '托尔大大', alt: '托尔大大', width: 1, height: 1, size: { height: 1744, width: 1770 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/是心愿卡.jpeg', title: '是心愿卡', alt: '是心愿卡', width: 16, height: 9, size: { height: 1080, width: 1861 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/黑白🐟.png', title: '黑白🐟', alt: '黑白🐟', width: 1, height: 1, size: { height: 910, width: 914 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/Im f**king love these guys.jpeg', title: 'Im f**king love these guys', alt: 'Im f**king love these guys', width: 5, height: 4, size: { height: 488, width: 621 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/WebRTC IS AWESOME.jpeg', title: 'WebRTC IS AWESOME', alt: 'WebRTC IS AWESOME', width: 14, height: 9, size: { height: 1080, width: 1728 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/光芒万丈.jpg', title: '光芒万丈', alt: '光芒万丈', width: 9, height: 12, size: { height: 1440, width: 1080 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/辉夜大小姐.jpg', title: '辉夜大小姐', alt: '辉夜大小姐', width: 1, height: 1, size: { height: 300, width: 300 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/无公众号.jpg', title: '无公众号', alt: '无公众号', width: 9, height: 19, size: { height: 2280, width: 1080 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/撞色.jpg', title: '撞色', alt: '撞色', width: 1, height: 1, size: { height: 1080, width: 1080 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/打羽毛球的第一天.jpg', title: '打羽毛球的第一天', alt: '打羽毛球的第一天', width: 9, height: 12, size: { height: 1440, width: 1080 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/Redirect.jpg', title: 'Redirect', alt: 'Redirect', width: 9, height: 8, size: { height: 924, width: 1086 } },\n  { src: 'https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/Google Earth 中的偶遇.jpg', title: 'Google Earth 中的偶遇', alt: 'Google Earth 中的偶遇', width: 9, height: 19, size: { height: 2248, width: 1080 } },\n]\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\n\nimport App from './App.js'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('app')\n)\n"],"sourceRoot":""}